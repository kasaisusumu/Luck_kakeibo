<!DOCTYPE html>
<html lang="ja">
<head>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6679918824743639"
     crossorigin="anonymous"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2LX0ZH24TN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2LX0ZH24TN');
  </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ラック家計簿</title>
   <style>
   .today-row {
    background-color: #e0f7e0; /* 薄い緑色 */
}
   /* Luck家計簿ボタンをh1サイズに */
        #toggleDescriptionBtn {
            font-size: 2em;  /* h1相当の大きさ */
            font-weight: bold;
            text-align: center;
            display: block;  /* ブロック要素にして中央寄せ */
            margin: 20px auto;  /* 上下に余白をつける */
            padding: 10px 20px;
            border: none;
            background-color: #4CAF50; /* 青系 */
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        /* ボタンのホバーエフェクト */
        #toggleDescriptionBtn:hover {
            background-color: #4CAF50;
        }

        /* 説明エリア */
        #descriptionSection {
            text-align: center;
            margin-bottom: 20px;
        }
     /* 表部分をスクロール可能にする */
    .scrollable-table {
        max-height: 200px; /* 高さを制限（5行分の高さに合わせて調整） */
        overflow-y: auto; /* 縦スクロールを有効にする */
        margin-top: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
		width: 100%; /* 表の横幅を75%に設定 */
        margin-left: auto;
        margin-right: auto;
    }

    .scrollable-table table {
        width: 100%;
        border-collapse: collapse;
    }

    .scrollable-table th, .scrollable-table td {
        padding: 1px; /* スマホは1px */
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    
	.scrollable-table th {
        background-color: #f4f4f4;
        position: sticky;
        top: 0;
        z-index: 1; /* ヘッダーがスクロールされないように上に表示されるようにする */
    }
   /* ボタンの横並び設定 */
    .button-group {
        display: flex;
        justify-content: space-between;
        gap: 10px; /* ボタン間のスペース */
        margin-bottom: 16px;
    }

    .button-group button {
        flex: 1; /* 各ボタンの幅を均等にする */
        padding: 12px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s;
    }

    .button-group button:hover {
        background-color: #45a049;
        transform: scale(1.05);
    }

    .button-group button:active {
        transform: scale(0.98);
    }
    /* 全体のスタイル */
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f7f7f7;
        color: #333;
    }

    /* ヘッダー */
    h1 {
        text-align: center;
        background-color: #4CAF50;
        color: white;
        margin: 0;
        padding: 16px 0;
        font-size: 24px;
        font-weight: 600;
    }

    /* 共通カードデザイン */
    .card {
        background-color: white;
        padding: 15px;
        margin: 16px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease;
    }

    .card:hover {
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    /* ボタンのスタイル */
    button {
        width: 100%;
        padding: 14px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        margin-top: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s;
    }

    button:hover {
        background-color: #45a049;
        transform: scale(1.05);
    }

    button:active {
		background-color: #45a049;
        transform: scale(1.05);
    }
	.toggle-btn {
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    background-color: #ddd;
    transition: all 0.3s ease;
}

.toggle-btn.active {
    font-size: 18px;
    font-weight: bold;
    background-color: #4CAF50;
    color: white;
    transform: scale(1.1);
}

.toggle-btn:not(.active) {
    opacity: 0.6;
}


    /* 入力フィールド */
    .input-group input,
    .textInput,
    #budgetInput,
	#todayAssetsInput,
    #storeInput,
    #dateInput,
    #amountInput,
    #initialAssetsInput {
        width: 100%;
        padding: 14px;
        margin: 8px 0;
        border-radius: 8px;
        border: 1px solid #ddd;
        font-size: 16px;
        box-sizing: border-box;
        background-color: #fff;
    }

    /* レスポンシブ対応 */
    @media (max-width: 768px) {
        .card {
            margin: 12px;
            padding: 12px;
        }

        h1 {
            font-size: 22px;
        }

        button {
            font-size: 14px;
            padding: 12px;
        }
    }

    /* 支出/収入詳細セクション */
    .details-container {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        margin-top: 20px;
    }

    .details-container div {
        flex: 1;
    }

    /* 詳細ボタン */
    .details-button {
        padding: 12px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        width: 100%;
        transition: background-color 0.3s ease;
        font-size: 14px;
    }

    .details-button:hover {
        background-color: #45a049;
    }

    .details {
		 max-height: 300px; /* 必要に応じて調整 */
    overflow-y: auto; /* 縦スクロール可能に */
        padding: 15px;
        background-color: #f9f9f9;
        margin-top: 12px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* 予算、全財産額関連 */
    .budget-info, .total-assets {
        background-color: white;
        padding: 15px;
        margin-top: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .budget-info h3, .total-assets h3 {
        margin-top: 0;
        color: #4CAF50;
    }

    /* 初期財産入力フォーム */
    .initial-assets-section input {
        padding: 14px;
        margin-top: 8px;
        border-radius: 8px;
        border: 1px solid #ddd;
        width: 100%;
        font-size: 16px;
    }

    /* ボックスの影響 */
    .card input,
    .card button {
        transition: 0.2s ease-in-out;
    }

    /* 全体コンテナ */
    .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 16px;
    }

    /* アイコンやボタンの間隔 */
    .button-group {
        display: flex;
        justify-content: space-between;
        gap: 10px;
    }










        
 /* 横並びで表示するスタイル */
    .details-container {
        display: flex;
        justify-content: space-between;
        gap: 20px;<!-- 20 -->
    }

    .details {
        width: 100%;  /* 横並びで2つの詳細が並ぶように */ <!-- 48% -->
		margin-right: 0px; /* ここでボタン間隔を狭くします10 */
        margin-left: 0px; /* 左側の余白も少し調整10 */
        padding: 10px ;<!-- 10 -->
        border: 5px solid #ddd;<!-- 1 -->
        border-radius: 10px;<!-- 5 -->
        box-shadow: 4 2px 5px rgba(0,0,0,0.1);<!-- 0 2px 5px rgba(0,0,0,0.1); -->
    }

    .details-button {
        margin-top: 20px;<!-- 20 -->
		margin-right: 0px; /* ここでボタン間隔を狭くします10 */
        margin-left: 10px; /* 左側の余白も少し調整10 */
        padding: 10px ;<!-- 10px 20px -->
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }
 /* 収入詳細ボタンを左にずらす */
    #incomeDetailsButton {
        margin-left: 0; /* 左の余白をなくして左に寄せる */
		margin-right: 0; /* ここでボタン間隔を狭くします10 */
    }
    .details-button:hover {
        background-color: #45a049;
    }
		body {
            font-family: 'ふい字', sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
        }

        h1, h2, h3 {
            color: #333;
        }

        h1 {
            text-align: center;
            font-size: 2rem;
        }

        h2, h3 {
            font-size: 1.5rem;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #333;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        .delete-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }

        .negative {
            color: red;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 1rem;
            border-radius: 5px;
        }

        button:hover {
            background-color: #45a049;
        }

        .input-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .input-group input {
            padding: 5px;
            font-size: 1rem;
        }

        .textInput {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        #details {
            margin-top: 20px;
        }

        .budget-info {
            margin-top: 20px;
        }

        .total-assets {
            margin-top: 20px;
            font-size: 1.2rem;
        }

        .initial-assets-section {
            margin-top: 20px;
        }

        .initial-assets-section input {
            padding: 5px;
            font-size: 1rem;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
.negative {
    color: red;
}
.input-group {
    display: flex;
    flex-direction: column; /* 各アイテムを縦に並べる */
    gap: 10px; /* 各入力項目の間隔 */
}

.input-item {
    display: flex; /* 横並びにする */
    align-items: center; /* 中央揃え */
    gap: 10px; /* ラベルと入力欄の間隔 */
}

.input-item label {
    margin: 0; /* ラベルの余白をなくす */
}

.input-item input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    flex-grow: 1; /* 入力欄がラベルと横並びに収まるように調整 */
}
/* モーダルのスタイル */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            width: 60%;
            border-radius: 10px;
            box-shadow: 0px 0px 10px gray;
        }

        .close {
            float: right;
            font-size: 24px;
            cursor: pointer;
        }

/* モーダルのスタイル */
#tutorialMessage {
    position: fixed;
    top: 10px; /* 上から少し余白を取る */
    left: 50%;
    transform: translateX(-50%);
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0px 0px 10px gray;
    display: none;
    z-index: 1000;
    width: 300px;
    text-align: center;
}


/* チュートリアルのハイライト */
        .highlight {
            background-color: #4682B4!important;
            transition: background-color 0.3s;
        }

#tutorialMessage button {
    background-color: #2980b9;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#tutorialMessage button:hover {
    background-color: #2980b9;
}
.hamburger {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      width: 30px;
      height: 25px;
      cursor: pointer;
    }
    .hamburger div {
      height: 5px;
      background-color: #000;
      border-radius: 5px;
    }
    .menu {
      display: none;
      position: absolute;
      top: 50px;
      left: 0;
      background-color: white;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 10px;
      width: 200px;
      z-index: 1;
    }
    .menu.active {
      display: block;
    }
    .menu a {
      display: block;
      padding: 10px;
      text-decoration: none;
      color: #000;
    }
    .menu a:hover {
      background-color: #28a745;
      color: white;
    }


    </style>
    <script>
	let tutorialSteps = [
    { element: "manualBtn", text: "ここを押して、手入力ができます。（1/8）" },
    { element: "manualBtn", text: "PayPayから追加する場合は、「PayPayから追加」を押します。（2/8）" },
    { element: "manualBtn", text: "このように入力したら、「追加」を押してみましょう。（3/8）" },  // 新たに追加されたステップ
    { element: "yosanBtn", text: "1日あたりの予算を設定してみましょう。（4/8）" },
    { element: "yosanBtn", text: "初めて記録したら，全財産を設定してみましょう。（5/8）" },
    { element: "yosanBtn", text: "データは，表と表下の支出詳細，収入詳細に表示されます。それぞれスクロールできます。（6/8）" },
    { element: "yosanBtn", text: "「予算比累計」で，今日までで使いすぎなのかどうかがわかります。（7/8）" },
    { element: "yosanBtn", text: "本日以降の全財産は，毎日予算額引かれた金額が表示されるため，任意の日付の全財産を予測することができます。（8/8）" }
];

let currentStep = 0;

function startTutorial() {
    currentStep = 0;
    showTutorialStep();
}

function showTutorialStep() {
    document.querySelectorAll('.toggle-btn').forEach(btn => {
        btn.classList.remove('highlight');
        btn.classList.remove('active');
    });

    if (currentStep < tutorialSteps.length) {
        let step = tutorialSteps[currentStep];
        let targetElement = document.getElementById(step.element);

        targetElement.classList.add('highlight');
        targetElement.classList.add('active');
        toggleFormBasedOnActive();

        // ポップアップモーダルのメッセージを更新
        let tutorialBox = document.getElementById("tutorialMessage");
        document.getElementById("tutorialText").innerText = step.text;

        tutorialBox.style.display = "block";

        // 2/8ステップが終わったら、3/8ステップと同時に自動入力を実行
        if (currentStep === 2) {
            autoFillAndAddEntry();
			
        }
		else if (currentStep === 3) {
    document.getElementById('budgetInput').value = 1000; // 予算記入欄に1000を自動入力
    scrollToElement("budgetInput");
}

		if (currentStep === 4) {
    
    document.getElementById('todayAssetsInput').value = 50000; // 予算記入欄に1000を自動入力
    scrollToElement("setTodayAssets");
}

        // 各ステップにおけるスクロール処理
        if (currentStep === 0 || currentStep === 1 || currentStep === 2 || currentStep === 3) {
            scrollToElement("manualBtn");
        } else if (currentStep === 4) {
			requestInitialAssets();
            scrollToElement("initialAssetsSection");
			
        } else if (currentStep === 5 || currentStep === 6 || currentStep === 7) {
            scrollToElement("budgetDisplay");
        }
    } else {
        document.getElementById("tutorialMessage").style.display = "none";
        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.classList.remove('highlight');
            btn.classList.remove('active');
        });
        toggleForm('manual'); // 初期状態に戻す
		// チュートリアル終了後に「導入方法」セクションまでスクロール
    scrollToElement("tutorial");
    }
}

function nextTutorialStep() {
    currentStep++;
    showTutorialStep();
    
}

// **チュートリアルを開く**
function openTutorial() {
    document.getElementById('tutorialModal').style.display = 'block';
}

// **チュートリアルを閉じる**
function closeTutorial() {
    document.getElementById('tutorialModal').style.display = 'none';
    localStorage.setItem('tutorialSeen', 'true'); // 見たことを記録
}

// 架空の購入データを自動で入力し、追加ボタンを押す関数
function autoFillAndAddEntry() {
    // 架空の購入データ（例：店名、日付、金額）
    const sampleStore = 'スーパーABC';
    const today = new Date();
    const sampleDate = today.toLocaleDateString('en-US', { month: 'numeric', day: 'numeric' });
    const sampleAmount = 1500;

    // 自動で入力欄に値を設定
    document.getElementById('storeInput').value = sampleStore;
    document.getElementById('dateInput').value = sampleDate;
    document.getElementById('amountInput').value = sampleAmount;

    

    // チュートリアルメッセージを消す
    document.getElementById('manualInputTutorial').remove();
}

function scrollToElement(elementId) {
    const element = document.getElementById(elementId);
    if (element) {
        // ポップアップの高さを考慮し、その下にスクロール
        const popupHeight = document.getElementById('tutorialMessage').offsetHeight;
        const targetPosition = element.getBoundingClientRect().top + window.scrollY - popupHeight - 30; // 10pxの余白を追加
        window.scrollTo({ top: targetPosition, behavior: 'smooth' });
    }
}


        
		function formatAmount(value) {
    return Math.abs(value).toLocaleString(); // 絶対値を取得してカンマ区切りにする
}

        // ローカルストレージから予算を取得
        function getBudget() {
            return JSON.parse(localStorage.getItem('dailyBudget')) || 0;
        }

        // ローカルストレージに予算を保存
        function setBudget(budget) {
            localStorage.setItem('dailyBudget', JSON.stringify(budget));
            fetchData();
			applyMonthFilter();
        }

        

        // 日付ごとの予算データを取得
        function getDailyBudgets() {
            return JSON.parse(localStorage.getItem('dailyBudgets')) || {};
        }

        // 日付ごとの予算を保存
        function setDailyBudgets(budgets) {
            localStorage.setItem('dailyBudgets', JSON.stringify(budgets));
        }

        // 存在しない日付を補完
      function fillMissingDates(existingDates, dailyTotal, month) {
    let year = 2025; // 年を固定（必要なら変更可）

    // monthが'selectedMonth'の場合は、既存の日付から月を取得
    if (month === 'selectedMonth' && existingDates.length > 0) {
        let firstDate = existingDates[0]; // 例: "3月3日"
        month = parseInt(firstDate.split('月')[0]); // 月の部分だけ取得
    }

    // その月の1日〜末日までの全日付を生成
    let lastDay = new Date(year, month, 0).getDate(); // 月の最終日

    for (let day = 1; day <= lastDay; day++) {
        let dateString = month + "月" + day + "日"; // ✅「3月1日」形式

        // 存在しない日付のみ補間
        if (!existingDates.includes(dateString)) {
            dailyTotal.expense[dateString] = 0;
            dailyTotal.income[dateString] = 0;
            existingDates.push(dateString);
        }
    }

    // 日付順にソート
    existingDates.sort((a, b) => {
        let aDate = new Date(`2025/${a.replace(/月/g, '/').replace(/日/g, '')}`);
        let bDate = new Date(`2025/${b.replace(/月/g, '/').replace(/日/g, '')}`);
        return aDate - bDate;
    });

    return existingDates; // 補間後の日付リストを返す
}




        // ローカルストレージから保存されたデータを取得して表示
    // 詳細情報の表示・非表示を切り替える
        function toggleExpenseDetails() {
            let expenseDetails = document.getElementById('expenseDetails');
            if (expenseDetails.style.display === "none") {
                expenseDetails.style.display = "block";
            } else {
                expenseDetails.style.display = "none";
            }
        }

        function toggleIncomeDetails() {
            let incomeDetails = document.getElementById('incomeDetails');
            if (incomeDetails.style.display === "none") {
                incomeDetails.style.display = "block";
            } else {
                incomeDetails.style.display = "none";
            }
        }

        // fetchData 関数内で支出詳細と収入詳細を作成
        // 金額をカンマ付きで表示する関数
function formatAmount(amount) {
    return new Intl.NumberFormat().format(amount);
}
// "ペースト"ボタンが押された時の処理
function pastePayPayHistory() {
    navigator.clipboard.readText()
        .then(text => {
            // クリップボードの内容をテキストエリアに貼り付け
            document.querySelector('.textInput').value = text;
			extractInfo();
        })
        .catch(err => {
            alert("クリップボードの読み込みに失敗しました。");
        });
		
}
function scrollToBottom() {
    let expenseDetails = document.getElementById('expenseDetails');
    let incomeDetails = document.getElementById('incomeDetails');
    if (expenseDetails) {
        expenseDetails.scrollTop = expenseDetails.scrollHeight;
    }
    if (incomeDetails) {
        incomeDetails.scrollTop = incomeDetails.scrollHeight;
    }
}
// ページが読み込まれたときに今月のデータを表示する
window.onload = function() {
	scrollToBottom() 
    // 今日の日付を取得
    let today = new Date();
    
    // 現在の月（YYYY-MM形式）
    let currentMonth = today.getFullYear() + '-' + (today.getMonth() + 1).toString().padStart(2, '0');  // 例: 2025-03
    
    // 初期値として selectMonth を currentMonth に設定
    let selectMonth = currentMonth;

    // 月選択欄に現在の月をセット
    document.getElementById('monthSelect').value = selectMonth;

    // 今月のデータを表示
    fetchData(selectMonth, 'currentMonth');
};

// 月選択後、データをフィルタリングして表示
function applyMonthFilter() {
    let selectedMonth = document.getElementById('monthSelect').value;

    // 月が選択された場合、選択された月のデータのみ表示
    if (selectedMonth) {
        fetchData(selectedMonth, 'selectedMonth');
    } else {
        // 現在の月のデータのみ表示
        fetchData(currentMonth, 'currentMonth');
    }
}

function setTodayAssets() {
    const input = document.getElementById('todayAssetsInput');
    const inputValue = parseInt(input.value, 10);
    if (isNaN(inputValue)) {
        alert("数値を入力してください。");
        return;
    }

    // 今日の日付を "MM月DD日" 形式で取得
    const today = new Date();
    const todayStr = (today.getMonth() + 1) + "月" + today.getDate() + "日";

    // 表示中の全財産額を取得（summaryテーブルの最終列の今日の行）
    const summaryRows = document.querySelectorAll('#summary tr');
    let currentAssets = null;

    summaryRows.forEach(row => {
        if (row.classList.contains("today-row")) {
            const assetCell = row.cells[4]; // 5列目が「全財産の推移」
            if (assetCell) {
                const text = assetCell.textContent.replace(/[¥,]/g, "");
                currentAssets = parseInt(text, 10);
            }
        }
    });

    if (currentAssets === null) {
        alert("今日の全財産が見つかりません。");
        return;
    }

    const diff = inputValue - currentAssets;
    if (diff === 0) {
        alert("現在の全財産と同じです。変更はありません。");
        return;
    }

    // 調整記録を paymentData に追加
    let paymentData = JSON.parse(localStorage.getItem("paymentData")) || [];

    const adjustment = {
        store: "全財産調整",
        date: todayStr,
        amount: diff,
    };

    paymentData.push(adjustment);
    localStorage.setItem("paymentData", JSON.stringify(paymentData));

    alert(`¥${Math.abs(diff)} を ${diff > 0 ? "収入" : "支出"}として記録しました。`);

    // 再描画
    fetchData((today.getFullYear()) + '-' + (today.getMonth() + 1).toString().padStart(2, '0'), 'currentMonth');

    // 入力リセット
    input.value = '';
}

// 月ごとにデータをフィルタリングして表示
function fetchData(month, monthType) {
    let data = JSON.parse(localStorage.getItem('paymentData')) || [];

    // 削除ボタンを追加
    let dataWithDeleteButtons = data.map((entry, index) => {
        return {
            ...entry,
            deleteButton: `<button class="delete-btn" onclick="deleteEntry(${index})">削除</button>`
        };
    });

    let expenses = dataWithDeleteButtons.filter(entry => entry.amount < 0);
    let incomes = dataWithDeleteButtons.filter(entry => entry.amount > 0);

    let dailyTotal = { expense: {}, income: {} };
    let allDailyTotal = { expense: {}, income: {} };
    let allDates = [];

    // 今日の日付と現在の月を取得
    let today = new Date();
    let currentMonth = today.getFullYear() + '-' + (today.getMonth() + 1).toString().padStart(2, '0');

    // すべての日付を集計し、支出と収入を日単位で保持
    dataWithDeleteButtons.forEach(entry => {
        let date = entry.date;
        let amount = entry.amount || 0;

        if (!date || amount === 0) return;

        if (!allDailyTotal.expense[date]) {
            allDailyTotal.expense[date] = 0;
            allDailyTotal.income[date] = 0;
        }

        if (amount < 0) {
            allDailyTotal.expense[date] += amount;
        } else {
            allDailyTotal.income[date] += amount;
        }

        if (!allDates.includes(date)) {
            allDates.push(date);
        }
    });

    allDates.sort((a, b) => {
        let aDate = new Date('2025/' + a.replace(/月/g, '/').replace(/日/g, ''));
        let bDate = new Date('2025/' + b.replace(/月/g, '/').replace(/日/g, ''));
        return aDate - bDate;
    });

    let selectedMonthStart = new Date(month + '/01');
    let totalAssets = 0;
	let fixedBudget = getBudget();

    
    // 選択月の開始日より前の日付について、総資産を加算・減算
    allDates.forEach(date => {
    let currentDate = new Date('2025/' + date.replace(/月/g, '/').replace(/日/g, ''));
    if (currentDate < selectedMonthStart) {
            totalAssets += allDailyTotal.income[date] || 0;
            totalAssets -= -(allDailyTotal.expense[date] || 0);
        }
    

    
});
// 今日以降の日付について、固定予算を減算
    if (selectedMonthStart > today) {
        let daysBetween = Math.floor((selectedMonthStart - today) / (1000 * 60 * 60 * 24));  // 日数の差を計算
        totalAssets -= fixedBudget * daysBetween;  // 固定予算を減算
    }



    // 今月のデータをフィルタリングし、dailyTotal に格納
    let existingDates = [];
    dataWithDeleteButtons.forEach(entry => {
        let date = entry.date || "不明";
        let amount = entry.amount || 0;

        if (date === "不明" || amount === 0) return;

        let entryMonth = date.split("月")[0].padStart(2, '0');

        if ((monthType === 'currentMonth' && currentMonth === '2025-' + entryMonth) ||
            (monthType === 'selectedMonth' && month === '2025-' + entryMonth)) {

           if (!(date in dailyTotal.expense)) {
    dailyTotal.expense[date] = 0;
}
if (!(date in dailyTotal.income)) {
    dailyTotal.income[date] = 0;
}


            if (amount < 0) {
                dailyTotal.expense[date] += amount;
            } else {
                dailyTotal.income[date] += amount;
            }

            if (!existingDates.includes(date)) {
                existingDates.push(date);
            }
        }
    });

    existingDates = fillMissingDates(existingDates, dailyTotal, 'selectedMonth');

    existingDates.sort((a, b) => {
        let aDate = new Date('2025/' + a.replace(/月/g, '/').replace(/日/g, ''));
        let bDate = new Date('2025/' + b.replace(/月/g, '/').replace(/日/g, ''));
        return aDate - bDate;
    });

    let summary = "<table><tr><th>日付</th><th>支出合計</th><th>収入合計</th><th>予算比累計</th><th>全財産の推移</th></tr>";

    
    let newDailyBudgets = {};
    let cumulativeBudget = 0;
    let todayDate = (today.getMonth() + 1) + "月" + today.getDate() + "日";

    let totalSpent = 0;
    let totalIncome = 0;
    let totalCumulativeBudget = 0;
    let totalAssetsAmount = 0;

    existingDates.forEach(date => {
        let spentAmount = dailyTotal.expense[date] || 0;
        let incomeAmount = dailyTotal.income[date] || 0;

        // 予算比に含めるエントリが存在する場合に処理を追加
        dataWithDeleteButtons.forEach(entry => {
            if (entry.date === date && entry.includeInBudget) {
                cumulativeBudget -= entry.amount;  // 予算比に含める
            }
        });
        cumulativeBudget += fixedBudget + spentAmount + incomeAmount;
        newDailyBudgets[date] = cumulativeBudget;

        totalAssets += incomeAmount;
        totalAssets -= -spentAmount;

        totalSpent += Math.abs(spentAmount);
        totalIncome += incomeAmount;
        totalCumulativeBudget += cumulativeBudget;
        totalAssetsAmount = totalAssets;

        let todayClass = (date === todayDate) ? 'today-row' : '';
        if (new Date('2025/' + date.replace(/月/g, '/').replace(/日/g, '')) > today) {
            totalAssets -= fixedBudget;
        }

        let budgetClass = cumulativeBudget < 0 ? 'negative' : '';
        let assetsClass = totalAssets < 0 ? 'negative' : '';

        let displayDate = date.replace(/月/g, '/').replace(/日/g, '');
        spentAmount *= -1;

        summary += `<tr class="${todayClass}" onclick="showDetails('${date}')">
                        <td>${displayDate}</td>
                        <td>¥${formatAmount(Math.abs(spentAmount))}</td>
                        <td>¥${formatAmount(incomeAmount)}</td>
                        <td class="${budgetClass}">¥${formatAmount(cumulativeBudget)}</td>
                        <td class="${assetsClass}">¥${formatAmount(totalAssets)}</td>
                    </tr>`;

        spentAmount *= -1;
    });

    // 合計行を追加
    summary += `<tr>
                    <td>合計</td>
                    <td>¥${formatAmount(totalSpent)}</td>
                    <td>¥${formatAmount(totalIncome)}</td>
                    <td>¥-</td>
                    <td>¥-</td>
                </tr>`;

    summary += "</table>";
    document.getElementById('summary').innerHTML = summary;

    // 支出・収入詳細の表示
    let expenseDetailsContent = expenses.filter(result => existingDates.includes(result.date))
        .map((result, index) =>
            `<div>
                <p>店名: ${result.store === "不明" ? `<button onclick="requestCorrection('store', ${index}, true)">不明</button>` : result.store}</p>
                <p>日付: ${result.date === "不明" ? `<button onclick="requestCorrection('date', ${index}, true)">不明</button>` : result.date}</p>
                <p>金額: ${result.amount === 0 ? `<button onclick="requestCorrection('amount', ${index}, true)">不明</button>` : '¥' + formatAmount(Math.abs(result.amount))}</p>
                ${result.deleteButton}
                <br><br>
            </div>`).join("");

    let incomeDetailsContent = incomes.filter(result => existingDates.includes(result.date))
        .map((result, index) =>
            `<div>
                <p>店名: ${result.store === "不明" ? `<button onclick="requestCorrection('store', ${index}, false)">不明</button>` : result.store}</p>
                <p>日付: ${result.date === "不明" ? `<button onclick="requestCorrection('date', ${index}, false)">不明</button>` : result.date}</p>
                <p>金額: ${result.amount === 0 ? `<button onclick="requestCorrection('amount', ${index}, false)">不明</button>` : '¥' + formatAmount(Math.abs(result.amount))}</p>
                ${result.deleteButton}
                <br><br>
            </div>`).join("");

    document.getElementById('expenseDetails').innerHTML = expenseDetailsContent;
    document.getElementById('incomeDetails').innerHTML = incomeDetailsContent;

    document.getElementById('budgetDisplay').innerHTML = `現在の予算: ¥${formatAmount(fixedBudget)}`;
    document.getElementById('totalAssetsDisplay').innerHTML = `最終日の全財産: ¥${formatAmount(totalAssets)}`;

    scrollToToday();
    scrollToBottom();
}






// 日付クリック時の詳細表示
function showDetails(date) {
    let expenses = JSON.parse(localStorage.getItem('paymentData')) || [];
    let expenseDetails = expenses.filter(entry => entry.date === date && entry.amount < 0)
        .map(entry => `
		<div>
            <p>店名: ${entry.store}</p>
            <p>日付: ${entry.date}</p>
            <p>金額: ¥${formatAmount(Math.abs(entry.amount))}</p>
			<br><br>
       </div> `).join("");
    
    let incomeDetails = expenses.filter(entry => entry.date === date && entry.amount > 0)
        .map(entry => `
		<div>
            <p>店名: ${entry.store}</p>
            <p>日付: ${entry.date}</p>
            <p>金額: ¥${formatAmount(entry.amount)}</p>
			<br><br>
        </div>`).join("");

    document.getElementById('expenseDetails').innerHTML = expenseDetails;
    document.getElementById('incomeDetails').innerHTML = incomeDetails;
	

}
function scrollToToday() {
    const todayRow = document.querySelector('.today-row');
    const container = document.querySelector('.scrollable-table');  // 変更

    if (todayRow && container) {
        const rowTop = todayRow.offsetTop;
        const rowHeight = todayRow.offsetHeight;
        const containerHeight = container.clientHeight;

        // 今日の行を中央に表示するためにスクロール
        container.scrollTop = rowTop - (containerHeight / 2) + (rowHeight / 2);
    }
}

















// **削除関数**
function deleteEntry(index) {
    let data = JSON.parse(localStorage.getItem('paymentData')) || [];
    let filteredData = data.filter((entry, i) => i !== index);

    // ローカルストレージに更新されたデータを保存
    localStorage.setItem('paymentData', JSON.stringify(filteredData));

    // 削除後、再度データを表示
    fetchData();
    applyMonthFilter();
}

function extractInfo() {
    let inputs = document.querySelectorAll('.textInput');
    let entries = [];
    let storeInput = document.getElementById('storeInput');
    let dateInput = document.getElementById('dateInput');
    let amountInput = document.getElementById('amountInput');

    // 入力内容を取り出し、空欄を除外
    inputs.forEach(input => {
        if (input.value.trim()) {
            entries.push(input.value.trim());
        }
    });

    let newData = [];
    entries.forEach(entry => {
        // 店名を正規表現で抽出
         let storeMatch = entry.match(/(.+?)\s*(に支払い|支|の.*?支|（讓渡）)/);
		let dateMatch = entry.match(/(\d{1,2})月(\d{1,2})日/); // 日付抽出（MM/DD形式）
        let amountMatch = entry.match(/(\d+,?\d*)円/);  // 金額抽出
        
        let store = storeMatch ? storeMatch[1] : "不明";  // 店名
        let date = dateMatch ? `${dateMatch[1]}/${dateMatch[2]}` : "不明";  // 月と日を取り出し「M/D」形式に
        let amount = amountMatch ? parseInt(amountMatch[1].replace(/,/g, ''), 10) : 0;  // 金額

        // 日付と金額が正しく取得できていれば、新しいデータを追加
        if (date !== "不明" && amount > 0) {
            newData.push({ store, date, amount: -amount, type: 'expense' }); // 支出データとして保存

            // 入力欄に自動で値をセット
            storeInput.value = store;
            dateInput.value = date;
            amountInput.value = amount;
        }
    });

    // ここに他の処理が続きます
}




function toggleFormBasedOnActive() {
    // すべてのフォームを非表示にする
    document.getElementById('paypayForm').style.display = 'none';
    document.getElementById('manualForm').style.display = 'none';
    document.getElementById('yosanForm').style.display = 'none';

    

    // ボタンが active の場合に対応するフォームを表示
    if (document.getElementById('paypayBtn').classList.contains('active')) {
        document.getElementById('paypayForm').style.display = 'block';
    } else if (document.getElementById('manualBtn').classList.contains('active')) {
        document.getElementById('manualForm').style.display = 'block';
    } else if (document.getElementById('yosanBtn').classList.contains('active')) {
        document.getElementById('yosanForm').style.display = 'block';
    }
}


window.onload = function() {
    // 初期状態で PayPay フォームを表示
    toggleForm('paypay');

    // 初期状態で PayPay ボタンに active クラスを付ける
    document.getElementById('paypayBtn').classList.add('active');
};


function toggleForm(form) {
    // すべてのフォームを非表示にする
    document.getElementById('paypayForm').style.display = 'none';
    document.getElementById('manualForm').style.display = 'none';
    document.getElementById('yosanForm').style.display = 'none';

    // すべてのボタンの active クラスを削除
    document.getElementById('paypayBtn').classList.remove('active');
    document.getElementById('manualBtn').classList.remove('active');
    document.getElementById('yosanBtn').classList.remove('active');


    // 選択されたフォームを表示
    if (form === 'paypay') {
        document.getElementById('paypayForm').style.display = 'block';
        document.getElementById('paypayBtn').classList.add('active');
    } else if (form === 'manual') {
        document.getElementById('manualForm').style.display = 'block';
        document.getElementById('manualBtn').classList.add('active');
    } else if (form === 'yosan') {
        document.getElementById('yosanForm').style.display = 'block';
        document.getElementById('yosanBtn').classList.add('active');
    }
}



        // 支出と収入を切り替える
        let isExpense = true;

        function toggleIncomeExpense() {
            isExpense = !isExpense;
            updateInputLabels();
        }

        function updateInputLabels() {
            let expenseIncomeText = isExpense ? "支出:" : "収入:";
            let buttonText = isExpense ? "支出の記入" : "収入の記入";
            document.getElementById('inputButtonWithoutBudget').innerText = buttonText;
            document.getElementById('inputLabel').innerText = expenseIncomeText ;
        }

        // 入力した情報をローカルストレージに保存
        function addManualEntry(includeInBudget) {
    let store = document.getElementById('storeInput').value.trim();
    let date = document.getElementById('dateInput').value.trim();
    let amount = parseInt(document.getElementById('amountInput').value.trim(), 10);

    if (store && date && !isNaN(amount)) {
        // 入力日付を「月/日」の形式に変換
        let formattedDate = formatDate(date);

        // 支出か収入かを判断して入力を保存
        let newEntry = {
            store,
            date: formattedDate,
            amount: isExpense ? -amount : amount,
            includeInBudget // ボタンに応じてincludeInBudgetを設定
        };

        let currentData = JSON.parse(localStorage.getItem('paymentData')) || [];
        currentData.push(newEntry);
        localStorage.setItem('paymentData', JSON.stringify(currentData));

        fetchData();
        applyMonthFilter();

        // 入力フィールドをクリア
        document.getElementById('storeInput').value = '';
        document.getElementById('dateInput').value = '';
        document.getElementById('amountInput').value = '';

        // 最初のエントリが追加された場合、全財産額を入力するフォームを表示
        if (currentData.length === 1) {
            requestInitialAssets();
        }
    } else {
        alert('すべてのフィールドに有効な情報を入力してください');
    }
}


        function formatDate(date) {
            let parts = date.split('/');
            let month = parts[0];
            let day = parts[1];
            return `${month}月${day}日`;
        }

       // 予算を設定
function setDailyBudget() {
    let budget = parseInt(document.getElementById('budgetInput').value, 10);
    if (isNaN(budget) || budget <= 0) {
        alert("有効な予算を入力してください");
        return;
    }
    setBudget(budget);  // 予算の更新
    
    // 入力欄をリセット
    document.getElementById('budgetInput').value = '';
    
    fetchData();
    applyMonthFilter();
}


       // 正しいデータを更新する関数
function updateEntry(index, newAmount, newDate, newDescription) {
    let currentData = JSON.parse(localStorage.getItem('paymentData')) || [];

    if (index < 0 || index >= currentData.length) {
        console.error("無効なインデックスです");
        return;
    }

    // 数値のバリデーション
    let parsedAmount = parseInt(newAmount, 10);
    if (isNaN(parsedAmount)) {
        alert("金額は数字で入力してください");
        return;
    }

    // データを更新
    currentData[index].amount = parsedAmount;
    currentData[index].date = newDate;
    currentData[index].description = newDescription || "";

    // データを保存
    localStorage.setItem('paymentData', JSON.stringify(currentData));

    // 変更後にデータを再取得
    fetchData();
	applyMonthFilter();
}

function toggleMenu() {
      const menu = document.getElementById('menu');
      menu.classList.toggle('active');
    }

    function showContactForm() {
  document.getElementById('contact-form').style.display = 'block';
  document.getElementById('privacy-policy').style.display = 'none';
  document.getElementById('about-me').style.display = 'none';
  document.getElementById('contact-form').scrollIntoView({ behavior: 'smooth' });
}

function showPrivacyPolicy() {
  document.getElementById('privacy-policy').style.display = 'block';
  document.getElementById('contact-form').style.display = 'none';
  document.getElementById('about-me').style.display = 'none';
  document.getElementById('privacy-policy').scrollIntoView({ behavior: 'smooth' });
}

function showAboutMe() {
  document.getElementById('about-me').style.display = 'block';
  document.getElementById('contact-form').style.display = 'none';
  document.getElementById('privacy-policy').style.display = 'none';
  document.getElementById('about-me').scrollIntoView({ behavior: 'smooth' });
}




        // 特定のエントリを削除
   





 
        

        window.onload = fetchData;
    </script>
</head>
<body>
<button id="toggleDescriptionBtn" onclick="toggleDescription()">説明欄を閉じる</button>

<!-- 説明エリア（初期状態は非表示） -->
<div id="descriptionSection" style="display: block;">
	<p>ラック家計簿は、このようにPayPayの決済画面から<strong>5タップで店名，日付，金額を記録できる</strong>簡単な家計簿です。</p>
	<p style="display:none;">PayPay 連携 簡単 自動 PayPay家計簿 最新 人気 安心 連携 連携 連携</p>

<img src="kiroku2.gif" alt="説明用GIF" width="300" />
	
<!-- チュートリアル開始ボタン -->
    <button id="tutorial"onclick="startTutorial()">チュートリアルを見る</button>
	
<p><strong>【導入方法】</strong></p>
 <p> <a href="https://www.icloud.com/shortcuts/9b4e4bbf28b440448509affffb322ecf" target="_blank">こちら</a>のiPhoneショートカットをダウンロード後，</p>
 <p>PayPayを開き，以下のようにショートカットのボタンを共有シートの一番上に持ってこれば導入完了です．</p>
 <img src="dounyuu.gif" alt="Dounyuu GIF" />
 <p>ホーム画面に家計簿を追加したい場合は <a href="https://www.icloud.com/shortcuts/f0484ba04e784c7eb6a901411c880d90" target="_blank">こちら</a>のiPhoneショートカットをダウンロード後，共有→ホーム画面に追加</p>
 


  
	
</div>
    <div class="button-group">
        <button id="paypayBtn" class="toggle-btn" onclick="toggleForm('paypay')"style="display:none;">PayPayから追加</button>
        <button id="manualBtn" class="toggle-btn" onclick="toggleForm('manual')">入力フォーム</button>
        <button id="yosanBtn" class="toggle-btn" onclick="toggleForm('yosan')">予算，全財産を設定</button>
    </div>

    <div id="tutorialMessage" class="tutorial-box">
    <p id="tutorialText"></p>
    <button onclick="nextTutorialStep()">次へ</button>
</div>

	


<script>
// ページ読み込み時に前回の状態をチェック
const descriptionState = localStorage.getItem('descriptionState');
    if (descriptionState === 'closed') {
        document.getElementById('descriptionSection').style.display = 'none';
        document.getElementById('toggleDescriptionBtn').textContent = 'ラック家計簿';
    }
window.onload = function() {
    const descriptionState = localStorage.getItem('descriptionState');
    if (descriptionState === 'closed') {
        document.getElementById('descriptionSection').style.display = 'none';
        document.getElementById('toggleDescriptionBtn').textContent = 'ラック家計簿';
    }
};

// 説明エリアの表示/非表示を切り替える
function toggleDescription() {
    const descriptionSection = document.getElementById('descriptionSection');
    const toggleButton = document.getElementById('toggleDescriptionBtn');

    if (descriptionSection.style.display === 'none') {
        descriptionSection.style.display = 'block';
        toggleButton.textContent = '説明欄を閉じる';
        localStorage.setItem('descriptionState', 'open'); // 開いた状態を保存
    } else {
        descriptionSection.style.display = 'none';
        toggleButton.textContent = 'ラック家計簿';
        localStorage.setItem('descriptionState', 'closed'); // 閉じた状態を保存
    }
}
</script>







	<script>
	window.onload = function() {
    // 初期状態で PayPay フォームを表示
    toggleForm('manual');
	
	// 今日の日付を取得
    let today = new Date();
    
    // 現在の月（YYYY-MM形式）
    let currentMonth = today.getFullYear() + '-' + (today.getMonth() + 1).toString().padStart(2, '0');  // 例: 2025-03
    
    // 初期値として selectMonth を currentMonth に設定
    let selectMonth = currentMonth;

    // 月選択欄に現在の月をセット
    document.getElementById('monthSelect').value = selectMonth;

    // 今月のデータを表示
    fetchData(selectMonth, 'currentMonth');
	
	
	
	

    
};

	</script>
    
    <div>
	<!-- PayPayフォーム -->
        <div class="card" id="paypayForm"style="display:none;" >
   
    <div>
        



    </div>
	</div>
	<!-- 手入力フォーム -->
        <div class="card" id="manualForm"style="display:none;">
        <h2>手動で支払い情報を追加</h2>
        <!-- 切り替えボタン -->
        <button onclick="toggleIncomeExpense()">支出と収入を切り替える</button>
		<!-- "ペースト"ボタンを追加 -->
<button id="pasteBtn"onclick="pastePayPayHistory()">PayPayから追加</button>
<!-- PayPayの履歴入力欄 -->
<textarea class="textInput" placeholder="「PayPayから追加」を押してください"style="display:none;"></textarea>

        <div class="input-group">
   <div class="input-group">
    <div class="input-item">
        <label for="storeInput">店名:</label>
        <input type="text" id="storeInput" placeholder="店名を入力">
    </div>
    <div class="input-item">
        <label for="dateInput">日付:</label>
        <input type="text" id="dateInput" placeholder="MM/DD">
    </div>
    <div class="input-item">
        <label id="inputLabel" for="amountInput">支出:</label>
        <input type="number" id="amountInput" placeholder="金額を入力">
    </div>
</div>
</div>
		<button id="inputButton" onclick="addManualEntry(true)">予算比に含めずに追加</button>
<button id="inputButtonWithoutBudget" onclick="addManualEntry(false)">追加</button>
 </div>
	
	<!-- 予算フォーム -->
        <div class="card" id="yosanForm" style="display:none;">
	<div>
        <h2>1日当たりの予算を設定</h2>
        <input type="number" id="budgetInput" placeholder="予算を入力">
        <button onclick="setDailyBudget()">予算を設定</button>
    </div>
	<!-- 全財産額入力 -->
     <div>
	<h2>全財産を設定</h2>
  <input type="number" id="todayAssetsInput" placeholder="全財産を入力" />
  <button onclick="setTodayAssets()">全財産を設定</button>
</div>

	</div>
	
	
    
    
	
	
   <!-- 月選択欄 -->
<div>
    <label for="monthSelect">月を選択:</label>
    <input type="month" id="monthSelect" onchange="applyMonthFilter()">
</div>
	
	<h3 style="display: inline;">日付ごとの集計</h3>
<div id="budgetDisplay" class="budget-info"></div>
      <!-- 表部分（5行のみ表示し、スクロール可能にする） -->
        <div class="scrollable-table">
		
    
    <div id="summary"></div>
            

    </div>
 <!-- 支出収入詳細を横並びで表示 -->
    <div class="details-container">
        <div>
            <button onclick="toggleExpenseDetails()" class="details-button">支出詳細</button>
            <div id="expenseDetails" class="details"></div>
        </div>
        <div>
            <button onclick="toggleIncomeDetails()" class="details-button">収入詳細</button>
            <div id="incomeDetails" class="details"></div>
        </div>
    </div>
     <!-- ハンバーガーメニュー -->
  <div class="hamburger" onclick="toggleMenu()">
    <div></div>
    <div></div>
    <div></div>
  </div>

  <!-- メニュー -->
  <div class="menu" id="menu">
  <a href="#" onclick="showContactForm(); toggleMenu();">お問い合わせフォーム</a>
  <a href="#" onclick="showPrivacyPolicy(); toggleMenu();">プライバシーポリシー</a>
  <a href="#" onclick="showAboutMe(); toggleMenu();">About Me</a> <!-- ← これも追加しておきます -->
</div>



  <div id="contact-form" class="contact-form" style="display:none;">
    <h2>お問い合わせフォーム</h2>
    <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field">
      <input type="hidden" name="bot-field" />
      <input type="hidden" name="form-name" value="contact" />
      <p>
          <label>Name <input type="text" name="name" placeholder="お名前を入力してください" /></label>
      </p>
      <p>
          <label>Email <input type="email" name="email" placeholder="アドレスを入力してください" /></label>
      </p>
      <p>
          <label>Content</label>
          <textarea name="content" rows="4" cols="50" placeholder="お問い合わせ内容を入力してください..."></textarea>
      </p>
      <p>
          <button type="submit">Send</button>
      </p>
    </form>
  </div>

  <div id="privacy-policy" class="privacy-policy" style="display:none;">
    <h2>プライバシーポリシー</h2>
    <p>
      このアプリでは、入力された起床時間のデータは、ユーザーのブラウザのローカルストレージに保存されます。<br />
      データは開発者や第三者に送信されることはありません。<br />
      お問い合わせフォームから送信された情報は、Netlifyのフォーム機能を通じてのみ使用されます。
    </p>
  </div>
  
  <div id="about-me" class="about-me" style="display:none;">
  <h2>About Me</h2>
  <p>
    このアプリは、毎日の起床時間を記録・可視化することで、規則正しい生活習慣をサポートする目的で作成されました。<br />
    作者は理系大学院生で、自身の生活改善のためにこのツールを開発しました。<br />
    ご意見・ご感想などございましたら、お気軽にお問い合わせフォームよりご連絡ください。
  </p>
</div>


  <footer>
    <hr />
    <p>
      ご不明な点がある場合は、お問い合わせフォームよりご連絡ください。
    </p>
  </footer>

	<!-- 修正フォーム -->
    <div id="correctionSection"></div>
	
     <div id="budgetDisplay" class="budget-info"></div>
    <div id="totalAssetsDisplay" class="total-assets"></div>
    <div id="details"></div>
    <div id="summary"></div>

    <div id="summary"></div>
</body>
</html>
